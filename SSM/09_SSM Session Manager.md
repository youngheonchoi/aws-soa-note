## SSM Session Manager

**Session Manager**는 EC2 인스턴스나 온프레미스 서버에 **SSH 없이 보안 셸 접속**을 제공하는 AWS Systems Manager의 기능입니다. 콘솔, CLI, 또는 SDK를 통해 접속 가능하며, 기존 SSH 방식보다 **더 안전하고 간편한 접근 방법**을 제공합니다.

<br>

## 주요 장점
- **SSH 키 불필요**: Bastion Host, 공개/비공개 키 없이 인스턴스에 접속 가능
- **인바운드 포트 열지 않음**: 보안 그룹에 **포트 22 등의 인바운드 규칙 설정이 필요 없음**
- **기록 기능 제공**: 모든 명령과 세션 정보가 **S3 또는 CloudWatch Logs에 저장** 가능
- **운영체제 지원**: Linux, macOS, Windows 모두 지원

<br>

## 작동 원리
1. **EC2 인스턴스에 SSM Agent가 설치 및 실행**되어 있어야 함
2. **인스턴스에 연결된 IAM 역할**이 Systems Manager와 통신 가능해야 함
3. **사용자(관리자)는 IAM 정책을 통해 Session Manager 접근 권한을 가져야 함**
4. 접속 요청 → SSM이 인스턴스와 세션을 설정 → 웹 콘솔 또는 CLI에서 셸 접속 가능

<br>

## IAM 및 보안 제어
- **IAM 정책**으로 다음 제어 가능:
  - 누가 Session Manager를 사용할 수 있는지
  - 어떤 인스턴스에 접속할 수 있는지
  - 어떤 명령을 실행할 수 있는지
- **태그 기반 제어**: 특정 태그가 붙은 인스턴스만 접속 허용 가능
  - 예: `"Resource: arn:aws:ec2:*:*:instance/*"` 조건에 `"Environment": "Dev"` 태그 설정
- **CloudTrail** 이벤트 기록: `StartSession` 이벤트 등을 통해 **모든 접속 내역 추적 가능**

<br>

## 로깅 및 감사 기능
- **CloudWatch Logs / Amazon S3**를 통해 명령 기록 자동 저장
- 보안 및 컴플라이언스 요구사항 충족에 유용
- **명령 제한 기능**: 실행 가능한 명령어를 제한하여 더 강력한 통제 가능

<br>

## 기존 SSH와의 비교
| 항목 | SSH | Session Manager |
|------|-----|-----------------|
| 키 관리 | 필요 (키 쌍) | 불필요 |
| Bastion Host | 필요 | 불필요 |
| 인바운드 포트 | 열어야 함 | 불필요 |
| 로깅 | 기본 제공 안됨 | S3 / CloudWatch에 기록 가능 |
| 접근 제어 | 보안 그룹 중심 | IAM 기반 세분화 제어 가능 |

<br>

## 활용 예시
- 운영 환경에서 SSH 키 분실 걱정 없이 안전하게 EC2에 접근
- 다수의 관리형 인스턴스에 대한 **중앙 집중형 접근 제어**
- 사용자 권한에 따라 **명령어 실행 제한 및 세션 감사** 수행
- 인프라 유지 보수 자동화와 접목하여 효율적인 운영 가능

<br>

## 정리
Session Manager는 SSH 키와 Bastion Host 없이도 안전하고 간편하게 EC2 및 온프레미스 서버에 접속할 수 있도록 해주는 AWS의 관리형 접속 서비스입니다. IAM 기반의 세분화된 접근 제어와 CloudWatch/S3 로깅을 통해 **보안성과 감사 능력을 극대화**할 수 있으며, 특히 **인바운드 포트를 열지 않아도 된다는 점에서 보안상 매우 유리**합니다.