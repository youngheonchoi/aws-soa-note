## Gateway Load Balancer (GWLB)

**Gateway Load Balancer(GWLB)** 는 **3계층(IP 레벨)의 네트워크 로드 밸런서**로, **보안 가상 어플라이언스(firewall, IDPS 등)** 와 함께 동작하여 **모든 네트워크 트래픽을 검사하거나 제어**할 수 있도록 설계된 로드 밸런서입니다.  
네트워크 기반 보안 제어와 트래픽 분석이 필요한 환경에 특화되어 있습니다.

<br>

## 주요 활용 목적
- **방화벽(Firewall)**
- **침입 탐지/방지 시스템 (IDS/IPS)**
- **딥 패킷 인스펙션 (DPI)**
- **패킷 재작성 또는 페이로드 수정**

<br>

## 작동 방식

1. 사용자의 트래픽이 **ALB** 등을 통해 애플리케이션에 도달하기 전,
2. **모든 트래픽은 먼저 GWLB를 통과**합니다.
3. GWLB는 트래픽을 **타사 네트워크 가상 어플라이언스**(예: 방화벽)로 전달합니다.
4. 어플라이언스가 트래픽을 검사 후
   - 문제가 없으면 → 다시 GWLB를 거쳐 **애플리케이션으로 전달**
   - 문제가 있으면 → **트래픽을 차단(드롭)**

> 이 구조를 통해 **트래픽을 중앙 집중식으로 모니터링 및 제어**할 수 있습니다.

<br>

## 구조 요약 (도표 기반 설명)
```plaintext
User
 ↓
ALB (애플리케이션 접점)
 ↓
GWLB
 ↓
가상 어플라이언스(방화벽, IDS 등)
 ↓
GWLB
 ↓
Application (EC2 등)
```

> 이 흐름은 **모든 트래픽이 필수적으로 보안 장비를 통과하도록 강제**합니다.

<br>

## 핵심 개념

| 기능 항목 | 설명 |
|-----------|------|
| **Layer** | L3 (IP 기반) |
| **트래픽 분산 대상** | EC2 인스턴스 또는 IP 주소 기반 가상 어플라이언스 |
| **주요 기능** | 트래픽 포워딩 + 로드 밸런싱 + 보안 적용 |
| **네트워크 역할** | 투명 네트워크 게이트웨이 (Transparent Gateway) |
| **라우팅 테이블 수정** | VPC 라우팅을 통해 트래픽을 GWLB로 유도 |
| **GENEVE 프로토콜** | 포트 **6081** 사용, 트래픽 캡슐화 수행 |

<br>

## 대상 그룹 구성
- **EC2 인스턴스** 또는 **사설 IP 주소** 기반 가상 어플라이언스 등록
- 온프레미스 또는 자체 네트워크 기반 장비도 등록 가능 (사설 IP 필수)
- 다양한 서드파티 보안 어플라이언스를 통해 트래픽 검열 가능

<br>

## GWLB의 장점
- **보안 기능 일관화**: 모든 인바운드/아웃바운드 트래픽 분석 가능
- **가상 어플라이언스 확장성 제공**: 부하에 따라 어플라이언스 풀 자동 확장 가능
- **투명한 통신 구조**: 애플리케이션 관점에서는 로드 밸런서만 인식
- **보안 기능 중앙화**: 네트워크 전반의 흐름 제어 가능

<br>

## 시험 대비 핵심 포인트
| 키워드 | 연결 지식 |
|--------|------------|
| **Layer 3 (IP 기반)** | GWLB는 L3 계층 로드 밸런서 |
| **GENEVE 프로토콜** | **포트 6081** 사용 |
| **보안 가상 어플라이언스 통합** | 방화벽, IDS/IPS, 트래픽 검사 |
| **사설 IP 대상 등록** | EC2 인스턴스 또는 온프레미스 서버 가능 |

> 시험에서 **“패킷 분석”, “보안 어플라이언스”, “GENEVE”** 라는 단어가 보이면 GWLB를 떠올리세요.

<br>

## 정리
Gateway Load Balancer(GWLB)는 **네트워크 수준의 보안 필터링을 위해 설계된 로드 밸런서**입니다. 모든 트래픽을 **중앙에서 보안 장비를 통해 분석 및 처리**할 수 있도록 지원하며, AWS에서 제공하는 가장 **최신형 로드 밸런서**입니다. **GENEVE(6081 포트)**, **L3 기반**, **보안 가상 어플라이언스 통합** 등은 시험에서 반드시 기억해야 할 키워드입니다.