## Auto Scaling Group (ASG) 개념 정리

### 1. ASG란?

**ASG (Auto Scaling Group)** 는 EC2 인스턴스를 자동으로 **증가(스케일 아웃)** 하거나 **감소(스케일 인)** 하는 서비스입니다.
웹사이트나 애플리케이션의 **트래픽 변화에 따라 유연하게 EC2 인스턴스를 조절**할 수 있게 해줍니다.

### 2. 핵심 목적

* 로드가 증가하면 EC2 인스턴스 자동 추가 (스케일 아웃)
* 로드가 감소하면 EC2 인스턴스 자동 종료 (스케일 인)
* 최소/최대/희망 인스턴스 개수 유지

### 3. 주요 장점

* **비용 최적화**: 필요한 만큼만 인스턴스를 사용
* **가용성 향상**: 비정상 인스턴스를 자동 교체
* **로드 밸런서와 연동 가능**: 트래픽 분산 및 상태 확인 연계

---

## 4. ASG 설정 요소

| 항목                  | 설명                    |
| ------------------- | --------------------- |
| **최소 용량 (Min)**     | 유지해야 할 EC2 인스턴스 최소 개수 |
| **희망 용량 (Desired)** | 목표로 하는 인스턴스 개수        |
| **최대 용량 (Max)**     | 허용 가능한 최대 인스턴스 수      |

> 예: Min=2, Desired=4, Max=7 설정 시
> 요청 증가 → 최대 7까지 자동 확장

---

## 5. 로드 밸런서와의 연동

* ELB와 연동 시, ASG 인스턴스는 자동으로 **트래픽 분산 대상**이 됨
* ELB의 **상태 확인(Health Check)** 결과를 기반으로
  비정상 인스턴스 → 종료 → 새로운 인스턴스로 교체

> **ELB + ASG 조합**은 높은 안정성과 자동화를 제공

---

## 6. 시작 템플릿 (Launch Template)

ASG가 EC2 인스턴스를 어떻게 시작할지 정의하는 구성 요소

### 포함 항목

* AMI ID
* 인스턴스 타입
* 사용자 데이터 (User Data)
* EBS 볼륨 설정
* 보안 그룹
* SSH 키 페어
* IAM 역할
* VPC 및 서브넷 정보
* 로드 밸런서 정보

> 기존 **Launch Configuration**은 더 이상 권장되지 않음

---

## 7. 스케일링 정책과 CloudWatch 경보

**스케일링 정책**은 ASG의 자동 동작 방식을 정의합니다.
CloudWatch 경보와 함께 사용하여 **트래픽 지표 기반 자동 확장**이 가능합니다.

### 예시 흐름

1. CloudWatch가 지표(metric) 감시 (ex: 평균 CPU 사용률)
2. 지정 임계값 초과 시 → **경보(Alarm) 발생**
3. 경보가 ASG에 트리거 전송
4. **스케일 아웃** 또는 **스케일 인** 동작 실행

### 스케일링 정책 유형

| 정책 유형      | 동작        |
| ---------- | --------- |
| **스케일 아웃** | 인스턴스 수 증가 |
| **스케일 인**  | 인스턴스 수 감소 |

> 트래픽에 따라 자동으로 동작하므로 **진정한 오토 스케일링**이 구현됨

---

## 8. 요약

| 항목      | 설명                                  |
| ------- | ----------------------------------- |
| ASG 목적  | EC2 인스턴스를 자동으로 증감                   |
| 연동 서비스  | ELB, CloudWatch, Launch Template    |
| 주요 설정   | Min/Desired/Max 용량, 시작 템플릿, 스케일링 정책 |
| 스케일 트리거 | CloudWatch 지표 기반 경보 (예: CPU 사용률)    |
| 장점      | 비용 최적화, 고가용성, 무중단 확장/축소             |
