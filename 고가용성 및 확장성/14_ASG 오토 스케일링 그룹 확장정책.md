## 오토 스케일링 그룹 (ASG)의 스케일링 정책 정리

### 1. 스케일링 정책 개요

ASG는 다양한 **스케일링 정책**을 통해 EC2 인스턴스를 자동으로 증가 또는 감소시킬 수 있습니다.
이를 통해 애플리케이션의 성능과 비용을 효율적으로 관리할 수 있습니다.

---

### 2. 스케일링 정책 유형

#### 동적 스케일링 (Dynamic Scaling)

1. **타겟 추적(Target Tracking) 스케일링**

   * 가장 단순한 설정 방식
   * 예: CPU 사용률을 40%로 유지하도록 조절
   * 목표값을 기준으로 자동 확장 또는 축소

2. **단순(Simple) 또는 단계(Step) 스케일링**

   * CloudWatch 알람을 기준으로 설정
   * 예: CPU > 70% → 인스턴스 1개 추가
   * 조건이 명확한 트리거 기반

#### 예약 스케일링 (Scheduled Scaling)

* 특정 시간 또는 주기로 스케일링 수행
* 예: 금요일 오후 5시에 최소 인스턴스를 10개로 설정

#### 예측 스케일링 (Predictive Scaling)

* 과거 사용 패턴을 분석하여 **자동으로 미래 로드를 예측**
* 반복되는 트래픽 상황에서 유용
* 예: 매일 점심시간 트래픽 증가 → 미리 확장 예약

---

### 3. 스케일링 메트릭 예시

적절한 메트릭 선택은 애플리케이션의 특성에 따라 다릅니다.

| 메트릭 종류         | 설명                                    |
| -------------- | ------------------------------------- |
| **CPU 사용률**    | 가장 보편적인 메트릭, EC2의 평균 CPU 기준           |
| **타겟당 요청 수**   | 대상 인스턴스가 처리 중인 요청 수 (예: 1000 req/EC2) |
| **네트워크 입출력량**  | 대역폭을 많이 사용하는 앱에 적합                    |
| **사용자 정의 메트릭** | CloudWatch에 직접 설정한 지표 사용 가능           |

> 메트릭은 CloudWatch에서 설정 및 감시하며, 임계값 초과 시 스케일링 트리거 발생

---

### 4. 예시 시나리오

* ASG에 EC2 인스턴스 3개
* 각 인스턴스의 평균 미해결 요청 수: 3개
* 타겟 메트릭이 3으로 설정되었다면 → 스케일 유지
* 타겟 메트릭이 1.5 이하로 설정되어 있다면 → 스케일 인

---

### 5. 스케일링 쿨다운 (Cooldown)

스케일링 작업 후 **일정 시간 동안 추가 작업을 막는 기능**

| 항목        | 설명                           |
| --------- | ---------------------------- |
| **기본값**   | 300초 (5분)                    |
| **목적**    | 새 인스턴스가 완전히 작동하기까지 안정화 시간 확보 |
| **활용 전략** | 빠른 스케일링이 필요한 경우 쿨다운 시간 단축 가능 |

> 애플리케이션이 빠르게 기동된다면 쿨다운 시간을 짧게 설정하는 것이 유리

---

### 6. 상세 모니터링 활성화

* **1분 간격으로 지표 수집** 가능
* 기본 모니터링은 5분 간격
* 빠른 스케일링 반응을 위해 **상세 모니터링 활성화 권장**

---

## 정리

| 항목          | 설명                         |
| ----------- | -------------------------- |
| **정책 종류**   | 타겟 추적, 단계, 예약, 예측          |
| **스케일링 조건** | CloudWatch 알람, 사용자 정의 지표 등 |
| **메트릭 예시**  | CPU, 요청 수, 네트워크, 사용자 정의    |
| **쿨다운**     | 안정화 대기 시간, 기본 300초         |
| **상세 모니터링** | 빠른 반응성 확보를 위해 필요           |
